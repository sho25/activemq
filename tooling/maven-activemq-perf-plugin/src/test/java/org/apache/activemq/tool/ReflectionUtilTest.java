begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_comment
comment|/**  *  * Copyright 2005-2006 The Apache Software Foundation  *  * Licensed under the Apache License, Version 2.0 (the "License");  * you may not use this file except in compliance with the License.  * You may obtain a copy of the License at  *  * http://www.apache.org/licenses/LICENSE-2.0  *  * Unless required by applicable law or agreed to in writing, software  * distributed under the License is distributed on an "AS IS" BASIS,  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  * See the License for the specific language governing permissions and  * limitations under the License.  */
end_comment

begin_package
package|package
name|org
operator|.
name|apache
operator|.
name|activemq
operator|.
name|tool
package|;
end_package

begin_import
import|import
name|junit
operator|.
name|framework
operator|.
name|TestCase
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Properties
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|File
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|activemq
operator|.
name|tool
operator|.
name|properties
operator|.
name|ReflectionUtil
import|;
end_import

begin_class
specifier|public
class|class
name|ReflectionUtilTest
extends|extends
name|TestCase
block|{
specifier|public
name|void
name|testDataTypeConfig
parameter_list|()
block|{
name|TestClass3
name|targetObj
init|=
operator|new
name|TestClass3
argument_list|()
decl_stmt|;
comment|// Initialize variables;
name|targetObj
operator|.
name|setBooleanData
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setIntData
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setLongData
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setShortData
argument_list|(
operator|(
name|short
operator|)
literal|0
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setDoubleData
argument_list|(
literal|0.0
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setFloatData
argument_list|(
literal|0.0F
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setByteData
argument_list|(
operator|(
name|byte
operator|)
literal|0
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setCharData
argument_list|(
literal|'0'
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setStringData
argument_list|(
literal|"false"
argument_list|)
expr_stmt|;
comment|// Set properties
name|Properties
name|props
init|=
operator|new
name|Properties
argument_list|()
decl_stmt|;
name|props
operator|.
name|setProperty
argument_list|(
literal|"booleanData"
argument_list|,
literal|"true"
argument_list|)
expr_stmt|;
name|props
operator|.
name|setProperty
argument_list|(
literal|"intData"
argument_list|,
literal|"1000"
argument_list|)
expr_stmt|;
name|props
operator|.
name|setProperty
argument_list|(
literal|"longData"
argument_list|,
literal|"2000"
argument_list|)
expr_stmt|;
name|props
operator|.
name|setProperty
argument_list|(
literal|"shortData"
argument_list|,
literal|"3000"
argument_list|)
expr_stmt|;
name|props
operator|.
name|setProperty
argument_list|(
literal|"doubleData"
argument_list|,
literal|"1234.567"
argument_list|)
expr_stmt|;
name|props
operator|.
name|setProperty
argument_list|(
literal|"floatData"
argument_list|,
literal|"9876.543"
argument_list|)
expr_stmt|;
name|props
operator|.
name|setProperty
argument_list|(
literal|"byteData"
argument_list|,
literal|"127"
argument_list|)
expr_stmt|;
name|props
operator|.
name|setProperty
argument_list|(
literal|"charData"
argument_list|,
literal|"A"
argument_list|)
expr_stmt|;
name|props
operator|.
name|setProperty
argument_list|(
literal|"stringData"
argument_list|,
literal|"true"
argument_list|)
expr_stmt|;
name|ReflectionUtil
operator|.
name|configureClass
argument_list|(
name|targetObj
argument_list|,
name|props
argument_list|)
expr_stmt|;
comment|// Check config
name|assertEquals
argument_list|(
literal|true
argument_list|,
name|targetObj
operator|.
name|isBooleanData
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|1000
argument_list|,
name|targetObj
operator|.
name|getIntData
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|2000
argument_list|,
name|targetObj
operator|.
name|getLongData
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|3000
argument_list|,
name|targetObj
operator|.
name|getShortData
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|1234.567
argument_list|,
name|targetObj
operator|.
name|getDoubleData
argument_list|()
argument_list|,
literal|0.0001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|9876.543
argument_list|,
name|targetObj
operator|.
name|getFloatData
argument_list|()
argument_list|,
literal|0.0001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|127
argument_list|,
name|targetObj
operator|.
name|getByteData
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|'A'
argument_list|,
name|targetObj
operator|.
name|getCharData
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"true"
argument_list|,
name|targetObj
operator|.
name|getStringData
argument_list|()
argument_list|)
expr_stmt|;
block|}
specifier|public
name|void
name|testValueOfMethod
parameter_list|()
block|{
name|TestClass4
name|targetObj
init|=
operator|new
name|TestClass4
argument_list|()
decl_stmt|;
name|ReflectionUtil
operator|.
name|configureClass
argument_list|(
name|targetObj
argument_list|,
literal|"testFile"
argument_list|,
literal|"TEST.FOO.BAR"
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"TEST.FOO.BAR"
argument_list|,
name|targetObj
operator|.
name|testFile
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
block|}
specifier|public
name|void
name|testGetProperties
parameter_list|()
block|{
name|TestClass3
name|testData
init|=
operator|new
name|TestClass3
argument_list|()
decl_stmt|;
name|testData
operator|.
name|setBooleanData
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|testData
operator|.
name|setByteData
argument_list|(
operator|(
name|byte
operator|)
literal|15
argument_list|)
expr_stmt|;
name|testData
operator|.
name|setCharData
argument_list|(
literal|'G'
argument_list|)
expr_stmt|;
name|testData
operator|.
name|setDoubleData
argument_list|(
literal|765.43
argument_list|)
expr_stmt|;
name|testData
operator|.
name|setFloatData
argument_list|(
literal|543.21F
argument_list|)
expr_stmt|;
name|testData
operator|.
name|setIntData
argument_list|(
literal|654321
argument_list|)
expr_stmt|;
name|testData
operator|.
name|setLongData
argument_list|(
literal|987654321
argument_list|)
expr_stmt|;
name|testData
operator|.
name|setShortData
argument_list|(
operator|(
name|short
operator|)
literal|4321
argument_list|)
expr_stmt|;
name|testData
operator|.
name|setStringData
argument_list|(
literal|"BAR.TEST.FOO"
argument_list|)
expr_stmt|;
name|TestClass3
name|targetObj
init|=
operator|new
name|TestClass3
argument_list|()
decl_stmt|;
name|targetObj
operator|.
name|setBooleanData
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setByteData
argument_list|(
operator|(
name|byte
operator|)
literal|10
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setCharData
argument_list|(
literal|'D'
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setDoubleData
argument_list|(
literal|1234.567
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setFloatData
argument_list|(
literal|4567.89F
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setIntData
argument_list|(
literal|123456
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setLongData
argument_list|(
literal|1234567890
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setShortData
argument_list|(
operator|(
name|short
operator|)
literal|1234
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setStringData
argument_list|(
literal|"Test.FOO.BAR"
argument_list|)
expr_stmt|;
name|targetObj
operator|.
name|setTestData
argument_list|(
name|testData
argument_list|)
expr_stmt|;
name|Properties
name|p
init|=
name|ReflectionUtil
operator|.
name|retrieveObjectProperties
argument_list|(
name|targetObj
argument_list|)
decl_stmt|;
name|assertEquals
argument_list|(
literal|"true"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"booleanData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"10"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"byteData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"D"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"charData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"1234.567"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"doubleData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"4567.89"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"floatData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"123456"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"intData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"1234567890"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"longData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"1234"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"shortData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"Test.FOO.BAR"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"stringData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"false"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"testData.booleanData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"15"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"testData.byteData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"G"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"testData.charData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"765.43"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"testData.doubleData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"543.21"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"testData.floatData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"654321"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"testData.intData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"987654321"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"testData.longData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"4321"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"testData.shortData"
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"BAR.TEST.FOO"
argument_list|,
name|p
operator|.
name|getProperty
argument_list|(
literal|"testData.stringData"
argument_list|)
argument_list|)
expr_stmt|;
block|}
specifier|public
name|void
name|testNestedConfig
parameter_list|()
block|{
name|TestClass3
name|t1
init|=
operator|new
name|TestClass3
argument_list|()
decl_stmt|;
name|TestClass3
name|t2
init|=
operator|new
name|TestClass3
argument_list|()
decl_stmt|;
name|TestClass3
name|t3
init|=
operator|new
name|TestClass3
argument_list|()
decl_stmt|;
name|TestClass3
name|t4
init|=
operator|new
name|TestClass3
argument_list|()
decl_stmt|;
name|TestClass3
name|t5
init|=
operator|new
name|TestClass3
argument_list|()
decl_stmt|;
name|ReflectionUtil
operator|.
name|configureClass
argument_list|(
name|t1
argument_list|,
literal|"stringData"
argument_list|,
literal|"t1"
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"t1"
argument_list|,
name|t1
operator|.
name|getStringData
argument_list|()
argument_list|)
expr_stmt|;
name|t1
operator|.
name|setTestData
argument_list|(
name|t2
argument_list|)
expr_stmt|;
name|ReflectionUtil
operator|.
name|configureClass
argument_list|(
name|t1
argument_list|,
literal|"testData.stringData"
argument_list|,
literal|"t2"
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"t2"
argument_list|,
name|t2
operator|.
name|getStringData
argument_list|()
argument_list|)
expr_stmt|;
name|t2
operator|.
name|setTestData
argument_list|(
name|t3
argument_list|)
expr_stmt|;
name|ReflectionUtil
operator|.
name|configureClass
argument_list|(
name|t1
argument_list|,
literal|"testData.testData.stringData"
argument_list|,
literal|"t3"
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"t3"
argument_list|,
name|t3
operator|.
name|getStringData
argument_list|()
argument_list|)
expr_stmt|;
name|t3
operator|.
name|setTestData
argument_list|(
name|t4
argument_list|)
expr_stmt|;
name|ReflectionUtil
operator|.
name|configureClass
argument_list|(
name|t1
argument_list|,
literal|"testData.testData.testData.stringData"
argument_list|,
literal|"t4"
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"t4"
argument_list|,
name|t4
operator|.
name|getStringData
argument_list|()
argument_list|)
expr_stmt|;
name|t4
operator|.
name|setTestData
argument_list|(
name|t5
argument_list|)
expr_stmt|;
name|ReflectionUtil
operator|.
name|configureClass
argument_list|(
name|t1
argument_list|,
literal|"testData.testData.testData.testData.stringData"
argument_list|,
literal|"t5"
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|"t5"
argument_list|,
name|t5
operator|.
name|getStringData
argument_list|()
argument_list|)
expr_stmt|;
block|}
specifier|public
class|class
name|TestClass1
block|{
specifier|private
name|boolean
name|booleanData
decl_stmt|;
specifier|private
name|int
name|intData
decl_stmt|;
specifier|private
name|long
name|longData
decl_stmt|;
specifier|public
name|boolean
name|isBooleanData
parameter_list|()
block|{
return|return
name|booleanData
return|;
block|}
specifier|public
name|void
name|setBooleanData
parameter_list|(
name|boolean
name|booleanData
parameter_list|)
block|{
name|this
operator|.
name|booleanData
operator|=
name|booleanData
expr_stmt|;
block|}
specifier|public
name|int
name|getIntData
parameter_list|()
block|{
return|return
name|intData
return|;
block|}
specifier|public
name|void
name|setIntData
parameter_list|(
name|int
name|intData
parameter_list|)
block|{
name|this
operator|.
name|intData
operator|=
name|intData
expr_stmt|;
block|}
specifier|public
name|long
name|getLongData
parameter_list|()
block|{
return|return
name|longData
return|;
block|}
specifier|public
name|void
name|setLongData
parameter_list|(
name|long
name|longData
parameter_list|)
block|{
name|this
operator|.
name|longData
operator|=
name|longData
expr_stmt|;
block|}
block|}
specifier|public
class|class
name|TestClass2
extends|extends
name|TestClass1
block|{
specifier|private
name|float
name|floatData
decl_stmt|;
specifier|private
name|byte
name|byteData
decl_stmt|;
specifier|private
name|char
name|charData
decl_stmt|;
specifier|public
name|float
name|getFloatData
parameter_list|()
block|{
return|return
name|floatData
return|;
block|}
specifier|public
name|void
name|setFloatData
parameter_list|(
name|float
name|floatData
parameter_list|)
block|{
name|this
operator|.
name|floatData
operator|=
name|floatData
expr_stmt|;
block|}
specifier|public
name|byte
name|getByteData
parameter_list|()
block|{
return|return
name|byteData
return|;
block|}
specifier|public
name|void
name|setByteData
parameter_list|(
name|byte
name|byteData
parameter_list|)
block|{
name|this
operator|.
name|byteData
operator|=
name|byteData
expr_stmt|;
block|}
specifier|public
name|char
name|getCharData
parameter_list|()
block|{
return|return
name|charData
return|;
block|}
specifier|public
name|void
name|setCharData
parameter_list|(
name|char
name|charData
parameter_list|)
block|{
name|this
operator|.
name|charData
operator|=
name|charData
expr_stmt|;
block|}
block|}
specifier|public
class|class
name|TestClass3
extends|extends
name|TestClass2
block|{
specifier|private
name|short
name|shortData
decl_stmt|;
specifier|private
name|double
name|doubleData
decl_stmt|;
specifier|private
name|String
name|stringData
decl_stmt|;
specifier|private
name|TestClass3
name|testData
decl_stmt|;
specifier|public
name|short
name|getShortData
parameter_list|()
block|{
return|return
name|shortData
return|;
block|}
specifier|public
name|void
name|setShortData
parameter_list|(
name|short
name|shortData
parameter_list|)
block|{
name|this
operator|.
name|shortData
operator|=
name|shortData
expr_stmt|;
block|}
specifier|public
name|double
name|getDoubleData
parameter_list|()
block|{
return|return
name|doubleData
return|;
block|}
specifier|public
name|void
name|setDoubleData
parameter_list|(
name|double
name|doubleData
parameter_list|)
block|{
name|this
operator|.
name|doubleData
operator|=
name|doubleData
expr_stmt|;
block|}
specifier|public
name|String
name|getStringData
parameter_list|()
block|{
return|return
name|stringData
return|;
block|}
specifier|public
name|void
name|setStringData
parameter_list|(
name|String
name|stringData
parameter_list|)
block|{
name|this
operator|.
name|stringData
operator|=
name|stringData
expr_stmt|;
block|}
specifier|public
name|TestClass3
name|getTestData
parameter_list|()
block|{
return|return
name|testData
return|;
block|}
specifier|public
name|void
name|setTestData
parameter_list|(
name|TestClass3
name|testData
parameter_list|)
block|{
name|this
operator|.
name|testData
operator|=
name|testData
expr_stmt|;
block|}
block|}
specifier|public
class|class
name|TestClass4
block|{
specifier|private
name|File
name|testFile
decl_stmt|;
specifier|public
name|String
name|getTestFile
parameter_list|()
block|{
return|return
name|testFile
operator|.
name|toString
argument_list|()
return|;
block|}
specifier|public
name|void
name|setTestFile
parameter_list|(
name|String
name|testFile
parameter_list|)
block|{
name|this
operator|.
name|testFile
operator|=
operator|new
name|File
argument_list|(
name|testFile
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_class

end_unit

